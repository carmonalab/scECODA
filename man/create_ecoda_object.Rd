% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main.r
\name{create_ecoda_object}
\alias{create_ecoda_object}
\title{Creates an ECODA object from various data types.}
\usage{
create_ecoda_object(
  data = NULL,
  sample_col = NULL,
  celltype_col = NULL,
  get_pb = FALSE,
  variance_explained = 0.5,
  top_n_hvcs = NULL
)
}
\arguments{
\item{data}{The primary input, which can be:
\itemize{
\item A \code{Seurat} object.
\item A \code{SingleCellExperiment} object.
\item A pre-calculated sample x cell type count matrix/data frame.
}}

\item{sample_col}{The column name in the single-cell object's metadata (or cell-level
data frame) that defines the unique sample ID for each cell.
(Required if \code{data} is a single-cell object).}

\item{celltype_col}{The column name in the single-cell object's metadata (or cell-level
data frame) that defines the cell type annotation for each cell.
(Required if \code{data} is a single-cell object).}

\item{get_pb}{Logical, if \code{TRUE} (default: \code{FALSE}), the function will
calculate and store DESeq2-normalized pseudobulk data in the \code{pb} slot.}

\item{variance_explained}{Numeric (default: 0.5). Used in subsequent steps by
\code{create_ecoda_object_from_counts} to determine how many
highly variable cell types (HVCs) to select.}

\item{top_n_hvcs}{Integer (optional). Overrides \code{variance_explained} if provided,
specifying the exact number of top HVCs to select.}
}
\value{
A new \link[=ECODA-class]{ECODA} object populated with \code{counts}, \code{metadata},
and optionally \code{pb} and the initial compositional analysis results.
}
\description{
This is a smart constructor function used to initialize an
\link[=ECODA-class]{ECODA} object. It handles the processing of single-cell objects
(\code{Seurat} or \code{SingleCellExperiment}) or raw data frames to extract
cell type counts, calculate sample metadata, and optionally generate
DESeq2-normalized pseudobulk data.
}
\examples{
\dontrun{
# Example using a Seurat object (assuming object 'pbmc' is loaded)
ecoda_obj <- create_ecoda_object(
  data = pbmc,
  sample_col = "orig.ident",
  celltype_col = "cell_type",
  get_pb = TRUE
)

# Example using a pre-calculated count matrix
# counts_df <- read.csv("cell_counts.csv", row.names = 1)
# ecoda_obj <- create_ecoda_object(data = counts_df)
}
}
\seealso{
\link[=ECODA-class]{ECODA}, \code{\link{calculate_pseudobulk}}, \code{\link{get_celltype_counts}}, \code{\link{get_sample_metadata}}
}
