% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plotting.r
\name{create_long_data}
\alias{create_long_data}
\title{Reshapes ECODA data into a long format for plotting and analysis.}
\usage{
create_long_data(ecoda_object, data_slot, label_col = NULL)
}
\arguments{
\item{ecoda_object}{An initialized \code{\link{ECODA}} object.}

\item{data_slot}{Character string specifying the data matrix to use. Must be
either \code{"freq"} (for relative abundance) or \code{"clr"}
(for CLR-transformed abundance).}

\item{label_col}{Character string (optional, default: \code{NULL}). The name of a
column in the \code{ecoda_object@metadata} slot to merge into
the long data frame (e.g., "Disease_State" or "Batch"). If \code{NULL},
only the abundance data and sample/celltype IDs are returned.}
}
\value{
A tidy, long format data frame with columns:
\itemize{
\item \code{sample_id}: Sample identifier.
\item \code{celltype}: Cell type name.
\item \code{rel_abundance} or \code{clr_abundance}: The quantitative value
depending on the chosen \code{data_slot}.
\item \code{...}: Additional column specified by \code{label_col} (if provided).
}
}
\description{
This function takes either the relative abundance (\code{freq}) or CLR-transformed
abundance (\code{clr}) matrix from an \code{\link{ECODA}} object, converts it
from a wide (samples x cell types) to a long (sample, celltype, value) format,
and optionally joins it with a specified column from the sample metadata.
}
\examples{
\dontrun{
# Assuming 'ecoda_obj' is a created ECODA object

# 1. Create long data with CLR abundance only
long_clr <- create_long_data(ecoda_obj, data_slot = "clr")

# 2. Create long data with relative abundance and merge the 'Treatment' metadata column
long_freq_labeled <- create_long_data(
  ecoda_obj,
  data_slot = "freq",
  label_col = "Treatment"
)
}
}
\seealso{
\code{\link{ECODA}}
}
