% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main.r
\name{ecoda}
\alias{ecoda}
\title{Create an ECODA object from various data types}
\usage{
ecoda(
  data = NULL,
  data_is_freq = FALSE,
  metadata = NULL,
  sample_col = NULL,
  celltype_col = NULL,
  get_pb = FALSE,
  variance_explained = 0.5,
  top_n_hvcs = NULL
)
}
\arguments{
\item{data}{The primary input, which can be:
\itemize{
\item A \code{Seurat} object.
\item A \code{SingleCellExperiment} object.
\item A sample x cell type matrix or data frame (counts or frequencies).
}}

\item{data_is_freq}{Logical (default: \code{FALSE}). If \code{TRUE}, the
input \code{data} is treated as relative frequencies (proportions) rather
than raw counts.}

\item{metadata}{A data frame containing sample-level metadata. Required if
\code{data} is a matrix/data frame. If \code{data} is a single-cell object,
metadata is extracted automatically.}

\item{sample_col}{The metadata column name defining unique sample IDs.
Required if \code{data} is a single-cell object.}

\item{celltype_col}{The metadata column name defining cell type annotations.
Required if \code{data} is a single-cell object.}

\item{get_pb}{Logical (default: \code{FALSE}). If \code{TRUE}, calculates and
stores DESeq2-normalized pseudobulk data in the \code{pb} slot.}

\item{variance_explained}{Numeric (default: 0.5). Proportion of variance used
to determine the number of highly variable cell types (HVCs).}

\item{top_n_hvcs}{Integer (optional). If provided, specifies the exact number
of top HVCs to select, overriding \code{variance_explained}.}
}
\value{
A new \link[=ECODA-class]{ECODA} object.
}
\description{
This is a smart constructor function used to initialize an
\link[=ECODA-class]{ECODA} object. It handles the processing of single-cell
objects (\code{Seurat} or \code{SingleCellExperiment}) or raw data frames to
extract cell type counts, calculate sample metadata, and optionally generate
DESeq2-normalized pseudobulk data.
}
\examples{
data(example_data)
Zhang <- example_data$Zhang
counts <- Zhang$cell_counts_lowresolution
freq <- calc_freq(counts)
metadata <- Zhang$metadata

ecoda_object <- ecoda(data = counts, metadata = metadata)

ecoda_object <- ecoda(data = freq, metadata = metadata)
}
