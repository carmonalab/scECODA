% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plotting.r
\name{plot_freq_barplot}
\alias{plot_freq_barplot}
\title{Generates a Stacked Bar Plot of Cell Type Relative Abundance.}
\usage{
plot_freq_barplot(
  ecoda_object,
  label_col = NULL,
  plot_by = c("sample", "group"),
  custom_sample_order = NULL,
  title = "",
  facet_by_label_col = TRUE
)
}
\arguments{
\item{ecoda_object}{An \code{\link{ECODA}} object containing cell type relative
frequencies in the \code{freq} slot.}

\item{label_col}{Character string (optional, default: \code{NULL}). The name of a
column in \code{ecoda_object@metadata} used to define grouping
or groups (required if \code{plot_by = "group"}).}

\item{plot_by}{Character string (default: \code{"sample"}). Specifies whether
to plot the relative abundance for each individual sample (\code{"sample"})
or the average relative abundance aggregated by a group (\code{"group"})
defined by \code{label_col}.}

\item{custom_sample_order}{Character vector (optional, default: \code{NULL}).
A vector of sample IDs to enforce a specific order
when \code{plot_by = "sample"}. If \code{NULL}, samples
are ordered first by \code{label_col} (if provided)
and then naturally.}

\item{title}{Character string (default: \code{""}). The main title for the plot.}

\item{facet_by_label_col}{Logical (default: \code{TRUE}). If \code{TRUE} and
\code{plot_by = "sample"}, the plot will be faceted
(split) horizontally by the categories in \code{label_col}.}
}
\value{
A \code{ggplot} object representing the stacked bar plot.
}
\description{
This function visualizes the relative abundance (composition) of cell types
across samples or across aggregated groups. It automatically handles data
preparation and ordering based on the provided parameters.
}
\examples{
\dontrun{
# Assuming 'ecoda_obj' is a created ECODA object with metadata

# 1. Plot frequency for every sample, ordered by sample ID:
p1 <- plot_freq_barplot(ecoda_obj)

# 2. Plot frequency for every sample, faceted and ordered by 'Treatment' column:
p2 <- plot_freq_barplot(ecoda_obj, label_col = "Treatment", plot_by = "sample")

# 3. Plot average frequency aggregated by 'Treatment' group:
p3 <- plot_freq_barplot(ecoda_obj, label_col = "Treatment", plot_by = "group")

# 4. Plot with a custom order:
custom_order <- c("S2", "S1", "S4", "S3")
p4 <- plot_freq_barplot(ecoda_obj, custom_sample_order = custom_order)
}
}
\seealso{
\code{\link{create_long_data}}, \code{\link{ECODA}}
}
